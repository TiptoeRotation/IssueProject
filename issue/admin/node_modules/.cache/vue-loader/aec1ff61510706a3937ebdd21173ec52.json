{"remainingRequest":"C:\\workspace\\IBM7_6_Issue\\issue\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\workspace\\IBM7_6_Issue\\issue\\admin\\src\\components\\NewIssue.vue?vue&type=style&index=0&id=44f8fec9&scoped=true&lang=css&","dependencies":[{"path":"C:\\workspace\\IBM7_6_Issue\\issue\\admin\\src\\components\\NewIssue.vue","mtime":1606265036441},{"path":"C:\\workspace\\IBM7_6_Issue\\issue\\admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\IBM7_6_Issue\\issue\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\workspace\\IBM7_6_Issue\\issue\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\workspace\\IBM7_6_Issue\\issue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\workspace\\IBM7_6_Issue\\issue\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5lbC1jb2wgL2RlZXAvIC50Zm9udCB7DQogIHRleHQtYWxpZ246IHJpZ2h0Ow0KfQ0KLmlzc3VlVCB7DQogIGNvbG9yOiBibHVlOw0KICBmb250LXNpemU6IDMwcHg7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KICBtYXJnaW4tdG9wOiAyMHB4Ow0KfQ0KLklzc3VlVGl0bGUgL2RlZXAvIC5lbC1pbnB1dCB7DQogIHdpZHRoOiA0OTRweDsNCiAgaGVpZ2h0OiAzNXB4Ow0KICB0ZXh0LWFsaWduOiBsZWZ0Ow0KfQ0KDQoubWVzc2FnZSB7DQogIG1hcmdpbi1sZWZ0OiA4MXB4Ow0KICBtYXJnaW4tdG9wOiAyMHB4Ow0KICBmb250LXNpemU6IDlweDsNCn0NCi50aXRsZTEgew0KICBib3JkZXItYm90dG9tOiAxcHggc29saWQgYmxhY2s7DQogIG1hcmdpbi1sZWZ0OiAyMnB4Ow0KICBtYXJnaW4tcmlnaHQ6IDIwcHg7DQp9DQouc3RlcCAvZGVlcC8gLmVsLWlucHV0IHsNCiAgd2lkdGg6IDEyMzBweDsNCiAgaGVpZ2h0OiAxMjZweDsNCiAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCi5Jc3N1ZU1lc3NhZ2UgL2RlZXAvIC5lbC1pbnB1dCB7DQogIHdpZHRoOiAyMjBweDsNCiAgdGV4dC1hbGlnbjogbGVmdDsNCn0NCg0KLnN0ZXAgL2RlZXAvIC5lbC1pbnB1dF9faW5uZXIgew0KICBoZWlnaHQ6IDEyNnB4Ow0KfQ0KLmNvbnRlbnQgL2RlZXAvIC5lbC10ZXh0YXJlYV9faW5uZXJ7DQogICAgaGVpZ2h0OiAxMjZweDsNCn0NCi5zdWJtaXR7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0K"},{"version":3,"sources":["NewIssue.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewIssue.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <div>{{\"您好，\"+this.loginName}}</div>\r\n    <div class=\"newissue\">\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"80px\" :rules=\"rules\" status-icon >\r\n        <!-- status-icon是小勾 和 叉的显示 -->\r\n        <div class=\"issueT\">\r\n          <el-row>\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple tfont\">Issue题目</div></el-col>\r\n            <el-col :span=\"18\"\r\n              ><div class=\"grid-content bg-purple-light\">\r\n                <el-form-item label=\"\" class=\"IssueTitle\" prop=\"iTitle\">\r\n                  <el-input\r\n                    v-model=\"form.iTitle\"\r\n                    placeholder=\"内容\"\r\n                    class=\"content\"\r\n                  ></el-input>\r\n                </el-form-item></div\r\n            ></el-col>\r\n          </el-row>\r\n        </div>\r\n        <el-button @click=\"returnHome()\" style=\"position:fixed;top:15px;right:24px;\">返回</el-button>\r\n        <div class=\"title1\">\r\n          <h4>基本信息</h4>\r\n        </div>\r\n        <div class=\"message\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\">Issue No.</div></el-col\r\n            >\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\" style=\"margin-left: 19px\">\r\n                创建时间\r\n              </div></el-col\r\n            >\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\" style=\"margin-left: 40px\">\r\n                Issue类型\r\n              </div></el-col\r\n            >\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\" style=\"margin-left: 61px\">\r\n                Issue等级\r\n              </div></el-col\r\n            >\r\n          </el-row>\r\n        </div>\r\n        <div>\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\">\r\n                <el-form-item label=\"\" class=\"IssueMessage\" >\r\n                  <!-- issueId 的 -->\r\n                  <el-input\r\n                    v-model=\"form.issueId\"\r\n                    placeholder=\"系统自动生成\"\r\n                    class=\"content\"\r\n                    :disabled=\"true\"\r\n                  ></el-input>\r\n                </el-form-item></div\r\n            ></el-col>\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple-light\">\r\n                <el-form-item label=\"\" class=\"IssueMessage\" prop=\"createDate\">\r\n                <!-- 创建时间 -->\r\n                  <el-input\r\n                    v-model=\"form.createDate\"\r\n                    value-format=“yyyy-MM-dd”\r\n                    format=“yyyy-MM-dd”        \r\n                    placeholder=\"系统自动生成\"\r\n                    class=\"content\"\r\n                    :disabled=\"true\"\r\n                  ></el-input>\r\n                </el-form-item></div\r\n            ></el-col>\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\">\r\n                <el-form-item label=\"\" class=\"IssueMessage\" prop=\"iType\">\r\n                <!-- 类型 -->\r\n                  <el-input\r\n                    v-model=\"form.iType\"\r\n                    placeholder=\"内容\"\r\n                    class=\"content\"\r\n                  ></el-input>\r\n                </el-form-item></div\r\n            ></el-col>\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple-light\">\r\n                <el-form-item label=\"\" class=\"IssueMessage\"  prop=\"ilevel\">\r\n                <!-- 等级 -->\r\n                  <el-select v-model=\"form.ilevel\" placeholder=\"内容\" >\r\n                    <el-option label=\"最高\" value=\"最高\"></el-option>\r\n                    <el-option label=\"较高\" value=\"较高\"></el-option>\r\n                    <el-option label=\"一般\" value=\"一般\"></el-option>\r\n                    <el-option label=\"低\" value=\"低\"></el-option>\r\n                  </el-select>\r\n                </el-form-item></div\r\n            ></el-col>\r\n          </el-row>\r\n        </div>\r\n\r\n        <div class=\"message\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\">影响版本</div></el-col\r\n            >\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\" style=\"margin-left: 19px\">\r\n                计划修改时间\r\n              </div></el-col\r\n            >\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\" style=\"margin-left: 40px\">\r\n                实际完成时间\r\n              </div></el-col\r\n            >\r\n            <el-col :span=\"6\"\r\n              ><div\r\n                class=\"grid-content bg-purple\"\r\n                style=\"margin-left: 61px\"\r\n              ></div\r\n            ></el-col>\r\n          </el-row>\r\n        </div>\r\n        <div>\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\">\r\n                <el-form-item label=\"\" class=\"IssueMessage\" prop=\"aVersion\">\r\n                <!-- 版本-->\r\n                  <el-input\r\n                    v-model=\"form.aVersion\"\r\n                    placeholder=\"\"\r\n                    class=\"content\"\r\n                  ></el-input>\r\n                </el-form-item></div\r\n            ></el-col>\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple-light\">\r\n                <el-form-item label=\"\" class=\"IssueMessage\" prop=\"planDate\">\r\n                <!-- 计划修改时间 -->\r\n                  <el-date-picker\r\n                    type=\"date\"\r\n                    placeholder=\"选择日期\"\r\n                    value-format=\"yyyy-MM-dd\"\r\n                    v-model=\"form.planDate\"\r\n                    class=\"IssueMessage\"\r\n                    style=\"width: 220px\" \r\n                    :picker-options=\"pickerOptions\"    \r\n                  >\r\n                  </el-date-picker>\r\n                </el-form-item></div\r\n            ></el-col>\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple\">\r\n                <el-form-item label=\"\" class=\"IssueMessage\">\r\n                <!-- 实际完成时间 -->\r\n                  <el-input\r\n                    v-model=\"form.finalDate\"\r\n                    placeholder=\"系统自动生成\"\r\n                    class=\"content\"\r\n                    :disabled=\"true\"\r\n                    \r\n                  ></el-input>\r\n                </el-form-item></div\r\n            ></el-col>\r\n            <el-col :span=\"6\"\r\n              ><div class=\"grid-content bg-purple-light\"></div\r\n            ></el-col>\r\n          </el-row>\r\n        </div>\r\n        <div style=\"margin-left: 22px\">\r\n          <h4>重现步骤</h4>\r\n        </div>\r\n          <el-form-item label=\"\" class=\"step\" prop=\"reSteps\">\r\n            <el-input\r\n              v-model=\"form.reSteps\"\r\n              placeholder=\"内容\"\r\n              class=\"content\"\r\n              type=\"textarea\"\r\n            ></el-input>\r\n          </el-form-item>\r\n\r\n        <div style=\"margin-left: 22px\">\r\n          <h4>指派修改人</h4>\r\n        </div>\r\n          <el-form-item label=\"\" class=\"IssueMessage\" prop=\"alterId\">\r\n                <!-- 等级 -->\r\n                  <el-select id=\"modifyId\" v-model=\"form.alterId\" placeholder=\"内容\" >\r\n                    <ul v-for=\"user in reUserName\" :key=\"user.id\">\r\n                        <el-option :label=\"user.username\" :value=\"user.username\"></el-option>\r\n                    </ul>\r\n                  </el-select>\r\n          </el-form-item>\r\n        <div class=\"submit\">\r\n        <el-form-item>\r\n          <el-button @click=\"onSubmit('form')\"  style=\"width: 173px;\">提交</el-button>\r\n        </el-form-item>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"NewIssue\",\r\n  data() {\r\n    return {\r\n      loginName:window.sessionStorage.getItem(\"loginName\"),\r\n      list: [],\r\n      reUserName:[],     //接收后端返回Users表的全部UserName\r\n      flag:\"\",           //接收成功创建issue的返回值\r\n      form: {              //建立form对象装载用户输入数据\r\n        iTitle: \"\",        // 题目\r\n        issueId: \"\",       // Issueno\r\n        createDate: \"\",    // 创建时间\r\n        iType: \"\",         // Issue类型\r\n        ilevel: \"\",        // Issue等级\r\n        aVersion: \"\",      // 版本\r\n        planDate: \"\",      // 计划修改时间   date\r\n        finalDate: \"\",     // 实际完成时间\r\n        reSteps: \"\",       // 重现步骤\r\n        alterId: \"\" ,      // 指派修改人\r\n      },\r\n      pickerOptions:{   // 当前时间之前的不能选择\r\n          disabledDate(time){\r\n            return time.getTime()<Date.now()-8.64e7;    // 8.64e7毫秒是一天\r\n          }\r\n        },\r\n     \r\n      rules: {\r\n        // rules 是elementui 中表单组件的，和prop一起对应\r\n        iTitle: [\r\n            { required: true, message: '不能为空', trigger: 'blur' },\r\n          { max: 80, message: \"长度不能超过80位\" },\r\n        ],\r\n        iType: [\r\n          { max: 30, message: \"长度不能超过30位\" },\r\n          {required: true,message: \"不能为空\"  , trigger: 'blur'},\r\n        ],\r\n        ilevel: [\r\n          {required: true,message: \"不能为空\", trigger: 'blur' },  // 输入框才有required\r\n          // { validator: validateilevel, trigger: 'blur', },\r\n        ],\r\n        aVersion: [\r\n          // {required: true,message: \"不能为空\" },   //可以为空\r\n          { max: 30, message: \"长度不能超过30位\" },\r\n        ],     \r\n        planDate: [\r\n          {required: true,message: \"不能为空\" },   //可以为空         \r\n        ], \r\n        reSteps: [\r\n          // {required: true,message: \"不能为空\" },  //可以为空\r\n          { max: 2000, message: \"长度不能超过2000位\" },\r\n        ],\r\n        alterId: [\r\n          {required: true,message: \"不能为空\" },\r\n          { max: 30, message: \"长度不能超过30位\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  created() {   // 页面加载时候执行\r\n    axios({           //在网页加载阶段从后端获取user表中所有的username\r\n      url: \"http://192.168.0.70:9090//getAllUsernames\",\r\n      method: \"get\",\r\n      data: {},\r\n    })\r\n      .then((data) => {\r\n        this.reUserName=data.data;  \r\n        //测试能否获得user表中username\r\n        // this.reUserName.forEach(element => { \r\n        //   console.log(element.element);\r\n        // });\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"error...\", err);\r\n      });\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    onSubmit(form) {\r\n      this.$refs[form].validate(valid => {\r\n        if (valid) {\r\n        //     // 如果通过验证 to do...  \r\n        let form=this.form;  // 这样form才是对象  this.form是绑定传数据的form，let form是自定义的局部对象\r\n        // var date = new Date();\r\n        // var seperator1 = \"-\";     //  改日期格式\r\n        // var year = date.getFullYear();\r\n        // var month = date.getMonth() + 1;\r\n        // var strDate = date.getDate();\r\n        // if (month >= 1 && month <= 9) {      \r\n        //     month = \"0\" + month;\r\n        // }\r\n        // if (strDate >= 0 && strDate <= 9) {    //  效果是2020-09-05\r\n        //     strDate = \"0\" + strDate;\r\n        // }\r\n        // var nowDate =  year + seperator1 + month + seperator1 + strDate;\r\n        // form.createDate = nowDate;\r\n        //在此调用接口，提交数据到后端\r\n        // var a=document.getElementById(\"modifyId\").value;\r\n        axios.post('http://192.168.0.70:9090/CreateIssue',{\r\n          iTitle:form.iTitle,        // 题目\r\n          //issueId: form.issueId,       // Issueno\r\n          createDate: form.createDate,    // 创建时间\r\n          iType: form.iType,         // Issue类型\r\n          ilevel: form.ilevel,        // Issue等级\r\n          aVersion: form.aVersion,      // 版本\r\n          planDate: form.planDate,      // 计划修改时间\r\n          //finalDate: form.finalDate,     // 实际完成时间\r\n          reSteps: form.reSteps,       // 重现步骤\r\n          alterId: form.alterId,      // 指派修改人\r\n          assignId: this.loginName,        //创建人\r\n          \r\n        }).then(ret=>{\r\n          this.flag=\"创建成功！\";\r\n          form=ret.data;\r\n          alert(this.flag);\r\n          alert(this.loginName);\r\n          this.$router.push(\"/homepage\");\r\n\r\n          // if (ret.data==1) {\r\n          //   alert(\"创建成功\");\r\n          //   this.$router.push(\"/homepage\");\r\n          // }\r\n          // else{\r\n          //   alert(\"创建失败\");\r\n          // }\r\n          //   // this.flag=\"创建成功！\"; \r\n            \r\n        })        \r\n\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      });\r\n      \r\n      \r\n        //let form=this.form;\r\n      /* console.log(form.iTitle);\r\n        console.log(form.iType);\r\n        console.log(form.ilevel);\r\n        console.log(form.aVersion);\r\n        console.log(form.planDate);\r\n        console.log(form.reSteps);\r\n        console.log(form.alterId);*/\r\n        \r\n    },\r\n\r\n    returnHome(){\r\n      this.$router.go(-1);\r\n    },\r\n\r\n  },\r\n  components: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-col /deep/ .tfont {\r\n  text-align: right;\r\n}\r\n.issueT {\r\n  color: blue;\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n  margin-top: 20px;\r\n}\r\n.IssueTitle /deep/ .el-input {\r\n  width: 494px;\r\n  height: 35px;\r\n  text-align: left;\r\n}\r\n\r\n.message {\r\n  margin-left: 81px;\r\n  margin-top: 20px;\r\n  font-size: 9px;\r\n}\r\n.title1 {\r\n  border-bottom: 1px solid black;\r\n  margin-left: 22px;\r\n  margin-right: 20px;\r\n}\r\n.step /deep/ .el-input {\r\n  width: 1230px;\r\n  height: 126px;\r\n  text-align: left;\r\n}\r\n.IssueMessage /deep/ .el-input {\r\n  width: 220px;\r\n  text-align: left;\r\n}\r\n\r\n.step /deep/ .el-input__inner {\r\n  height: 126px;\r\n}\r\n.content /deep/ .el-textarea__inner{\r\n    height: 126px;\r\n}\r\n.submit{\r\n    text-align: center;\r\n}\r\n</style>"]}]}